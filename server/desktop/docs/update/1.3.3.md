# Versi贸n 1.3.3

## Resumen General

Esta versi贸n incluye importantes mejoras t茅cnicas y funcionales derivadas de la auditor铆a Global G.A.P., enfocadas en la correcci贸n de errores y el fortalecimiento de controles, filtros y trazabilidad del sistema.

---

## Cambios Principales


### Cambios en la vista Clasificaci贸n de Calidad

Se realiz贸 una refactorizaci贸n importante en la carpeta `clasificacionCalidad` para mejorar la mantenibilidad y claridad del c贸digo:

- **IngresoClasificacionCalidad.tsx**:

  - Mejoras en la gesti贸n de estado y l贸gica de guardado.
  - Nueva funci贸n para calcular porcentajes y validar datos antes de enviar.
  - Manejo de errores y mensajes de confirmaci贸n al usuario.
  - Limpieza autom谩tica del array de datos tras guardar.
  - Mejoras en la funci贸n de eliminaci贸n de elementos.
  - Reorganizaci贸n del uso de hooks personalizados y estructura de renderizado.

- **Reestructuraci贸n de archivos**:

  - Eliminados archivos antiguos (`functions/data.ts`, `functions/obtenerPorcentage.ts`, `functions/request.ts`).
  - Nuevos archivos para separar l贸gica y validaciones:
    - `functions/functions.ts`
    - `hooks/useDataIngresoClasificacion.ts`
    - `validations/validationsRequest.ts`

- **Otros cambios**:
  - Ajuste de importaciones y mejor organizaci贸n del c贸digo.
  - Separaci贸n de responsabilidades y eliminaci贸n de c贸digo obsoleto.

**Resumen:**  
Refactorizaci贸n, mejor separaci贸n de l贸gica, eliminaci贸n de archivos obsoletos, creaci贸n de utilidades y hooks espec铆ficos, y mejoras en la experiencia de usuario con validaciones y manejo de errores.

### Cambios en la vista Orden de vaceo

##  Descripci贸n General

Este m贸dulo gestiona la **Orden de Vaceo**, permitiendo la administraci贸n y actualizaci贸n de lotes a trav茅s de una interfaz reactiva y un sistema de eventos personalizado.

---

## З Componentes Principales

### 1. `OrdenDeVaceo.tsx`

- **Responsabilidad**: Componente principal encargado de la gesti贸n visual y l贸gica de la orden de vaceo.
- **Caracter铆sticas**:
  - Utiliza el hook personalizado `useDataOrdenVaceo` para la obtenci贸n y manipulaci贸n de datos.
  - Implementa un sistema de eventos para actualizar datos en acciones como:
    - A帽adir lote
    - Vaciar lote
    - Directo nacional
    - Modificar orden
    - Modificar historial
    - Inspecci贸n de fruta
    - Derogar lote
    - Finalizar desverdizado

---

### 2. `useDataOrdenVaceo.ts`

- **Responsabilidad**: Hook principal que centraliza la l贸gica de datos de la orden de vaceo.
- **Funciones principales**:
  - `obtenerData`: Obtiene datos de inventario y de la orden de vaceo.
  - `handleAddOrdenVaceo`: A帽ade elementos a la orden.
  - `handleRemoveOrdenVaceo`: Elimina elementos de la orden.
  - `handleMoveOrdenVaceo`: Permite reordenar elementos.

---

### 3. `ListaOrdenVaceo.tsx`

- **Responsabilidad**: Renderiza la lista de lotes en la orden de vaceo.
- **Caracter铆sticas**:
  - Implementa drag and drop con `react-beautiful-dnd`.
  - Incluye funcionalidad para vaciar lotes y confirmaciones mediante modales.

---

##  Utilidades y Componentes Auxiliares

- **`PredioCard.tsx`**: Muestra informaci贸n de predios.
- **`OrdenVaciadoCard.tsx`**: Muestra cada elemento de la orden.
- **Archivos CSS**: Para la estilizaci贸n.

---

##  Organizaci贸n de Carpetas

```text
components/   # Componentes principales
hooks/        # L贸gica de negocio (hooks personalizados)
utils/        # Componentes y funciones auxiliares
css/          # Estilos
functions/    # Funciones de utilidad

### Correcciones Adicionales

* Corregido campo PRECINTO en documento de transporte "Carta de Responsabilidad".
* Correcci贸n en el filtro del inventario de fruta sin procesar, que previamente no funcionaba correctamente.
* Correcci贸n en el informe de listas de empaque para mostrar correctamente el c贸digo de la finca.

### Seguridad y Rendimiento

* Mejoras en validaciones cruzadas entre base de datos y aplicativo.
* Optimizaci贸n y reorganizaci贸n del c贸digo para mejor rendimiento.

---

## Instrucciones de Actualizaci贸n

**Requisitos Previos**

* Aseg煤rese de tener la versi贸n m铆nima del sistema operativo 1.3 instalada.
* Valide los perfiles de usuario para garantizar que tengan acceso a las nuevas funcionalidades y filtros.

**Pasos para Actualizar**

* Realice una copia de seguridad del sistema actual antes de iniciar la actualizaci贸n.
* Ejecute el instalador proporcionado y siga las instrucciones en pantalla.
* Realice pruebas en los m贸dulos afectados para confirmar que la actualizaci贸n fue exitosa.


---

## Notas y Cr茅ditos

* **Desarrollado por:** Equipo de Transformaci贸n Digital.

---

## Conclusi贸n

La versi贸n 1.3.3 representa un avance significativo en la mejora continua del sistema, aumentando la trazabilidad, fortaleciendo la seguridad operativa y asegurando el cumplimiento con est谩ndares internacionales. Para consultas adicionales, contacte al equipo de Transformaci贸n Digital.
```
